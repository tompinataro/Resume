worker_processes 1;

events {
    worker_connections 1024;
}

http {
    server {
        # Heroku's dynamic port assignment
        listen <%= ENV["PORT"] %>;

        # Serve static files from /app
        root /app;

        # Default route to index.html
        location / {
            try_files $uri $uri/ /index.html;
        }

        # Optional: Force HTTPS
        if ($http_x_forwarded_proto != "https") {
            return 301 https://$host$request_uri;
        }

        # Optional: Cache static assets
        location ~* \.(?:ico|css|js|gif|jpe?g|png|woff2?|eot|ttf|svg|otf)$ {
            expires max;
            add_header Cache-Control "public";
        }
    }
}
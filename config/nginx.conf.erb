worker_processes 1;

events {
    worker_connections 1024;
}

http {
    server {
        listen <%= ENV["PORT"] %>; # Heroku dynamically assigns the port

        # Root directory for the static site
        root /app;

        # Serve the default index.html
        location / {
            index index.html;
            try_files $uri /index.html;
        }

        # Force HTTPS (optional, recommended)
        if ($http_x_forwarded_proto != "https") {
            return 301 https://$host$request_uri;
        }

        # Cache static assets (optional)
        location ~* \.(?:ico|css|js|gif|jpe?g|png|woff2?|eot|ttf|svg|otf)$ {
            expires max;
            add_header Cache-Control "public";
        }

        # Custom error pages (optional)
        error_page 404 /404.html;
    }
}